{
  "name": "java-maven",
  "description": "Template for Java projects using Maven",
  "variables": {
    "projectIdentifier": "<artifactId>{{projectIdentifier}}</artifactId>",
    "version": "<version>{{version}}</version>"
  },
  "detect": {
    "manifest": "pom.xml",
    "searchPattern": "<artifactId>{{identifier}}</artifactId>"
  },

  "steps": [
    {
      "name": "Build dependent project first",
      "cmd": "mvn clean install -Dmaven.test.skip=true",
      "workdir": "{{targetDir}}"
    },
    {
      "name": "Update pom versions",
      "cmd": "correlate replace {{projectIdentifier}}",
      "workdir": "{{targetDir}}"
    },
    {
      "name": "Recompile dependent project",
      "cmd": "mvn clean compile -Dmaven.test.skip=true",
      "workdir": "{{sourceDir}}"
    }
  ]
}